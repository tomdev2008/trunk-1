package com.aibinong.tantan.ui.activity;import android.annotation.SuppressLint;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.os.Build;import android.os.Bundle;import android.support.v4.view.PagerAdapter;import android.support.v4.view.ViewPager.OnPageChangeListener;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.view.WindowManager;import android.widget.ImageView;import com.aibinong.tantan.R;import com.aibinong.yueaiapi.utils.ConfigUtil;import com.bumptech.glide.Glide;import com.bumptech.glide.load.engine.DiskCacheStrategy;import java.util.ArrayList;/** * 引导Activity */@SuppressLint("NewApi")public class GuideActivity extends Activity implements OnPageChangeListener, OnClickListener {    private static final String TAG = GuideActivity.class.getName();    private android.support.v4.view.ViewPager mPager_guide;    private com.viewpagerindicator.CirclePageIndicator mIndicator_guide;    private ArrayList<View> guideViews;    public static Intent launchIntent(Context context) {        Intent intent = new Intent(context, GuideActivity.class);        context.startActivity(intent);        return intent;    }    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_guide);        requireTransStatusBar();        bindViews();        ConfigUtil.getInstance().seGuideShowed();    }    protected void requireTransStatusBar() {        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {//            if (VERSION.SDK_INT >= VERSION_CODES.LOLLIPOP) {//                getWindow()//                        .setStatusBarColor(//                                getResources().getColor(//                                        R.color.color_common_textwhite));//                getWindow()//                        .setNavigationBarColor(//                                getResources().getColor(//                                        R.color.color_common_textwhite));////            } else            {                // 4.4的话半透明状态栏                getWindow().addFlags(                        WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);//                getWindow().addFlags(//                        WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION);            }        }    }    private void bindViews() {        guideViews = new ArrayList<>();        int[] imageIds = new int[]{R.raw.abn_yueai_guide1, R.raw.abn_yueai_guide2, R.raw.abn_yueai_guide3};        for (int i = 0; i < imageIds.length; i++) {            View guideView = getLayoutInflater().inflate(R.layout.abn_yueai_item_guide, null);            guideViews.add(guideView);            ImageView imageView = (ImageView) guideView.findViewById(R.id.iv_guide_image);            Glide.with(this).load(imageIds[i]).asGif().sizeMultiplier(0.5f).diskCacheStrategy(DiskCacheStrategy.SOURCE).into(imageView);            if (i == imageIds.length - 1) {                guideView.setOnClickListener(this);            }        }        mPager_guide = (android.support.v4.view.ViewPager) findViewById(R.id.pager_guide);        mIndicator_guide = (com.viewpagerindicator.CirclePageIndicator) findViewById(R.id.indicator_guide);        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(                ViewGroup.LayoutParams.MATCH_PARENT,                ViewGroup.LayoutParams.MATCH_PARENT);        mPager_guide.setAdapter(new GuidePagerAdapter(guideViews));        mIndicator_guide.setViewPager(mPager_guide);        mIndicator_guide.setOnPageChangeListener(this);    }    @Override    public void onBackPressed() {    }    @Override    public void onPageScrollStateChanged(int arg0) {    }    @Override    public void onPageScrolled(int arg0, float arg1, int arg2) {    }    @Override    public void onPageSelected(int arg0) {    }    @Override    public void onClick(View v) {        finish();    }    class GuidePagerAdapter extends PagerAdapter {        private ArrayList<View> views;        public GuidePagerAdapter(ArrayList<View> views) {            this.views = views;        }        @Override        public int getCount() {            return views.size();        }        @Override        public boolean isViewFromObject(View view, Object object) {            return view == object;        }        @Override        public Object instantiateItem(ViewGroup container, int position) {            container.addView(views.get(position), 0);            return views.get(position);        }        @Override        public void destroyItem(ViewGroup container, int position, Object object) {            container.removeView(views.get(position));        }    }}